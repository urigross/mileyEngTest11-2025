<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>×”×›× ×” ×œ××‘×—×Ÿ ×”×¨×“ ×§×•×“×“ - ×“'</title>
    <style>
        /* --- 1. ×”×’×“×¨×•×ª ×¢×™×¦×•×‘ ×‘×¡×™×¡×™×•×ª --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f4f8; /* ×¨×§×¢ ××¤×•×¨ ×‘×”×™×¨ */
            margin: 0;
            padding: 10px;
            text-align: center;
            color: #333;
            direction: rtl;
        }

        /* --- 2. ×›×•×ª×¨×ª ×¢×œ×™×•× ×” --- */
        #header-area {
            background-color: white;
            border-radius: 15px;
            padding: 15px;
            margin: 0 auto 20px auto;
            max-width: 600px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            position: relative;
        }

        h1 {
            color: #5c6bc0;
            margin: 0;
            font-size: 1.5rem;
        }
        
        h3 {
            margin: 5px 0 0 0;
            color: #666;
            font-size: 1rem;
            font-weight: normal;
        }

        /* ×ª×’×™×ª × ×™×§×•×“ */
        .score-tag {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            background-color: #f1c40f;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        /* ×›×¤×ª×•×¨ ×”×’×“×¨×•×ª ×§×˜×Ÿ */
        .settings-btn {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0.7;
        }

        /* --- 3. ×¨×©×ª ×”×›×¤×ª×•×¨×™× (×”×ª×¤×¨×™×˜) --- */
        /* ×—×©×•×‘: display: grid ××‘×˜×™×— ×©×”×ª×¤×¨×™×˜ ×™×•×¤×™×¢ ××™×“ */
        #main-menu-grid {
            display: grid; 
            grid-template-columns: 1fr 1fr; /* ×©×ª×™ ×¢××•×“×•×ª */
            gap: 12px;
            max-width: 600px;
            margin: 0 auto;
            padding-bottom: 50px;
        }

        .menu-btn {
            border: none;
            border-radius: 10px;
            padding: 15px;
            color: white;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 0 rgba(0,0,0,0.2);
            transition: transform 0.1s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 60px;
        }

        .menu-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        /* ××™×™×§×•× ×™× ×‘×ª×•×š ×”×›×¤×ª×•×¨ */
        .menu-btn span {
            font-size: 1.4rem;
            margin-bottom: 5px;
        }

        /* ×¦×‘×¢×™× (×œ×¤×™ ×”×ª××•× ×” ×©×œ×š) */
        .c-blue { background-color: #5d8cd6; }    /* ×›×ª×™×‘×”, ×§×¨×™××”... */
        .c-red { background-color: #c94b38; }     /* ×§×œ×™×§ ××”×™×¨ */
        .c-green { background-color: #6ab063; }   /* ××¤×¢×œ ××©×¤×˜×™× */
        .c-orange { background-color: #d38428; }  /* ×××ª ×©×§×¨ */
        .c-dark { background-color: #3e4a59; }    /* ×¤×™×¦×•×¥ ×‘×•×¢×•×ª */
        .c-purple { background-color: #8e5ea2; }  /* ×¡× ×™×™×§ */
        .c-teal { background-color: #62a3b7; }    /* ×¢×“×›×•× ×™× */
        .c-gold { background-color: #dcb028; }    /* ×©×™××™× */

        /* ×›×¤×ª×•×¨ ×¨×—×‘ (×ª×•×¤×¡ ××ª ×›×œ ×”×©×•×¨×”) */
        .wide-btn {
            grid-column: 1 / -1;
        }
        
        /* ×©×•×¨×” ×ª×—×ª×•× ×” ××¤×•×¦×œ×ª (×›××• ×‘×ª××•× ×”: ×¢×“×›×•× ×™× ×¨×—×‘ + ×©×™××™× ×¦×¨) */
        .bottom-row {
            grid-column: 1 / -1;
            display: flex;
            gap: 10px;
        }
        .btn-updates { flex: 4; }
        .btn-records { flex: 1; }


        /* --- 4. ××¡×›×™ ×”××©×—×§ (××•×¡×ª×¨×™× ×›×‘×¨×™×¨×ª ××—×“×œ) --- */
        .game-screen {
            display: none;
            background: white;
            padding: 20px;
            border-radius: 15px;
            max-width: 600px;
            margin: 20px auto;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        /* ×›×¤×ª×•×¨ ×—×–×¨×” */
        .back-btn {
            width: 100%;
            background-color: #eceff1;
            color: #333;
            border: none;
            padding: 12px;
            margin-top: 20px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
        }

        /* --- 5. ×¢×™×¦×•×‘ ×¡×¤×¦×™×¤×™ ×œ××©×—×§×™× --- */
        
        /* ×××ª ××• ×©×§×¨ */
        #tf-img img { max-width: 100%; height: auto; max-height: 250px; border-radius: 10px; border: 3px solid #eee; margin: 15px 0; }
        .tf-opts { display: flex; gap: 15px; }
        .tf-opt { flex: 1; padding: 20px; border: none; border-radius: 10px; color: white; font-size: 1.2rem; cursor: pointer; }
        .yes { background-color: #4CAF50; }
        .no { background-color: #f44336; }

        /* ×¡× ×™×™×§ */
        #snake-wrap { width: 300px; height: 300px; background-color: #333; margin: 10px auto; position: relative; border-radius: 8px; border: 4px solid #555; }
        .s-part { width: 20px; height: 20px; background-color: lime; position: absolute; border-radius: 3px; }
        .s-food { width: 20px; height: 20px; background-color: red; position: absolute; border-radius: 50%; }

        /* ×–×™×›×¨×•×Ÿ */
        .mem-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 15px; }
        .mem-card { background-color: #d38428; height: 85px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; position: relative; }
        .mem-card img { max-width: 80%; max-height: 80%; }
        .mem-card.flipped { background-color: white; border: 2px solid #d38428; }
        
        /* ×”×’×“×¨×•×ª */
        .switch { position: relative; display: inline-block; width: 50px; height: 28px; vertical-align: middle; margin-left: 10px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        input:checked + .slider { background-color: #2196F3; }
        input:checked + .slider:before { transform: translateX(22px); position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; border-radius: 50%; transition: .4s; }

    </style>
</head>
<body>

    <div id="header-area">
        <div class="score-tag">× ×™×§×•×“: <span id="score-val">0</span></div>
        <button class="settings-btn" onclick="openSettings()">âš™ï¸</button>
        <h1>×”×›× ×” ×œ××‘×—×Ÿ ×‘×× ×’×œ×™×ª - ×“'</h1>
        <h3>×›×œ ×”××™×œ×™× + ××©×¤×˜×™×</h3>
    </div>

    <div id="main-menu-grid">
        <button class="menu-btn c-blue" onclick="alert('×”××©×—×§ ×‘×¤×™×ª×•×—')"><span>âœï¸</span> ×›×ª×™×‘×ª ××™×œ×™×</button>
        <button class="menu-btn c-blue" onclick="alert('×”××©×—×§ ×‘×¤×™×ª×•×—')"><span>ğŸ‘‚</span> ×”×‘× ×ª ×”× ×©××¢</button>

        <button class="menu-btn c-blue" onclick="alert('×”××©×—×§ ×‘×¤×™×ª×•×—')"><span>ğŸ“–</span> ×§×¨×™××”</button>
        <button class="menu-btn c-blue" onclick="alert('×”××©×—×§ ×‘×¤×™×ª×•×—')"><span>ğŸ§©</span> ×”×©×œ××ª ××©×¤×˜×™×</button>

        <button class="menu-btn c-red" onclick="alert('×”××©×—×§ ×‘×¤×™×ª×•×—')"><span>âš¡</span> ×§×œ×™×§ ××”×™×¨</button>
        <button class="menu-btn c-green" onclick="alert('×”××©×—×§ ×‘×¤×™×ª×•×—')"><span>ğŸ—ï¸</span> ××¤×¢×œ ×”××©×¤×˜×™×</button>

        <button class="menu-btn c-orange" onclick="startGame('truefalse')"><span>âœ…</span> ×××ª ××• ×©×§×¨</button>
        <button class="menu-btn c-dark" onclick="alert('×”××©×—×§ ×‘×¤×™×ª×•×—')"><span>ğŸ«§</span> ×¤×™×¦×•×¥ ×‘×•×¢×•×ª</button>

        <button class="menu-btn c-purple wide-btn" onclick="startGame('snake')"><span>ğŸ</span> ×¡× ×™×™×§ ××™×œ×™×</button>

        <button class="menu-btn c-orange wide-btn" onclick="startGame('memory')"><span>ğŸƒ</span> ××©×—×§ ×”×–×™×›×¨×•×Ÿ</button>

        <div class="bottom-row">
            <button class="menu-btn c-teal btn-updates" onclick="alert('××™×Ÿ ×¢×“×›×•× ×™×')"><span>ğŸ“œ</span> ×¢×“×›×•× ×™×</button>
            <button class="menu-btn c-gold btn-records" onclick="alert('×˜×‘×œ×” ×¨×™×§×”')"><span>ğŸ†</span> ×©×™××™×</button>
        </div>
    </div>

    <div id="screen-settings" class="game-screen">
        <h2>×”×’×“×¨×•×ª</h2>
        <div style="text-align: right; padding: 15px; border-bottom: 1px solid #eee;">
            <label class="switch">
                <input type="checkbox" id="chk-prog" onchange="saveProg()">
                <span class="slider"></span>
            </label>
            <strong>×œ××™×“×” ×¤×¨×•×’×¨×¡×™×‘×™×ª</strong>
            <p style="font-size:0.9rem; color:#666; margin:5px 0;">××™×œ×™× ×©×™×“×¢×ª ×œ× ×™×•×¤×™×¢×• ×©×•×‘.</p>
        </div>
        <button class="back-btn" style="color:red;" onclick="resetProg()">××™×¤×•×¡ ×”×ª×§×“××•×ª</button>
        <button class="back-btn" onclick="goHome()">×—×–×•×¨ ×œ×ª×¤×¨×™×˜</button>
    </div>

    <div id="screen-tf" class="game-screen">
        <h2>×××ª ××• ×©×§×¨?</h2>
        <h1 id="tf-word" style="font-size: 2.5rem; color:#d38428; margin:10px;">Word</h1>
        <div id="tf-img"></div>
        <div class="tf-opts">
            <button class="tf-opt yes" onclick="guessTF(true)">×××ª</button>
            <button class="tf-opt no" onclick="guessTF(false)">×©×§×¨</button>
        </div>
        <button class="back-btn" onclick="goHome()">×™×¦×™××”</button>
    </div>

    <div id="screen-snake" class="game-screen">
        <h2>×¡× ×™×™×§ ××™×œ×™×</h2>
        <p>××›×•×œ ××ª: <span id="snake-target" style="font-weight:bold; color:#8e5ea2; font-size:1.3rem;"></span></p>
        <div id="snake-wrap"></div>
        <button class="back-btn" onclick="goHome()">×™×¦×™××”</button>
    </div>

    <div id="screen-mem" class="game-screen">
        <h2>××©×—×§ ×”×–×™×›×¨×•×Ÿ</h2>
        <div id="mem-board" class="mem-grid"></div>
        <button class="back-btn" onclick="goHome()">×™×¦×™××”</button>
    </div>

    <audio id="snd-eat" src="https://www.soundjay.com/human/sounds/eating-chip-1.mp3"></audio>

<script>
    // --- × ×ª×•× ×™× ---
    const words = [
        { id: 1, en: "House", img: "https://cdn-icons-png.flaticon.com/512/619/619032.png" },
        { id: 2, en: "Dog", img: "https://cdn-icons-png.flaticon.com/512/616/616408.png" },
        { id: 3, en: "Cat", img: "https://cdn-icons-png.flaticon.com/512/616/616430.png" },
        { id: 4, en: "Sun", img: "https://cdn-icons-png.flaticon.com/512/869/869869.png" },
        { id: 5, en: "Tree", img: "https://cdn-icons-png.flaticon.com/512/490/490091.png" },
        { id: 6, en: "Ball", img: "https://cdn-icons-png.flaticon.com/512/326/326031.png" },
        { id: 7, en: "Car", img: "https://cdn-icons-png.flaticon.com/512/741/741407.png" }
    ];

    // ××©×ª× ×™×
    let learned = [];
    let progressive = false;
    let score = 0;

    // ××ª×—×•×œ ×‘×˜×¢×™× ×” (××•×’×Ÿ ××©×’×™××•×ª)
    try {
        learned = JSON.parse(localStorage.getItem('learned') || "[]");
        progressive = localStorage.getItem('progressive') === 'true';
        document.getElementById('chk-prog').checked = progressive;
    } catch(e) { console.log('Storage unavailable'); }

    // --- ×¤×•× ×§×¦×™×•×ª × ×™×•×•×˜ ---
    function goHome() {
        document.querySelectorAll('.game-screen').forEach(el => el.style.display = 'none');
        document.getElementById('main-menu-grid').style.display = 'grid'; // ××—×–×™×¨ ××ª ×”×ª×¤×¨×™×˜
        document.getElementById('header-area').style.display = 'block';
        stopSnake();
    }

    function openSettings() {
        document.getElementById('main-menu-grid').style.display = 'none';
        document.getElementById('screen-settings').style.display = 'block';
        document.getElementById('header-area').style.display = 'none';
    }

    function startGame(game) {
        document.getElementById('main-menu-grid').style.display = 'none';
        document.getElementById('header-area').style.display = 'none';
        
        if (game === 'truefalse') {
            document.getElementById('screen-tf').style.display = 'block';
            playTF();
        } else if (game === 'snake') {
            document.getElementById('screen-snake').style.display = 'block';
            playSnake();
        } else if (game === 'memory') {
            document.getElementById('screen-mem').style.display = 'block';
            playMemory();
        }
    }

    // --- ×œ×•×’×™×§×ª × ×ª×•× ×™× ---
    function getWords(num) {
        let pool = words;
        if (progressive) {
            pool = words.filter(w => !learned.includes(w.id));
        }
        // ×× ×—×¡×¨ ××™×œ×™×, ××œ× ××”×›×œ
        if (pool.length < num) {
            let needed = num - pool.length;
            let extras = words.filter(w => !pool.includes(w)).sort(()=>0.5-Math.random()).slice(0, needed);
            pool = pool.concat(extras);
        }
        return pool.sort(() => 0.5 - Math.random());
    }

    function addScore(id) {
        score += 10;
        document.getElementById('score-val').innerText = score;
        if (progressive && !learned.includes(id)) {
            learned.push(id);
            localStorage.setItem('learned', JSON.stringify(learned));
        }
    }

    // --- ×”×’×“×¨×•×ª ---
    function saveProg() {
        progressive = document.getElementById('chk-prog').checked;
        localStorage.setItem('progressive', progressive);
    }
    function resetProg() {
        if(confirm("×œ××¤×¡?")) {
            learned = [];
            localStorage.setItem('learned', "[]");
            alert("××•×¤×¡!");
        }
    }

    // --- ×××ª ××• ×©×§×¨ ---
    let tfObj, tfIsTrue;
    function playTF() {
        let list = getWords(2);
        tfObj = list[0];
        tfIsTrue = Math.random() > 0.5;
        
        let imgToShow = tfIsTrue ? tfObj.img : list[1].img;
        document.getElementById('tf-word').innerText = tfObj.en;
        document.getElementById('tf-img').innerHTML = `<img src="${imgToShow}">`;
    }
    function guessTF(ans) {
        if (ans === tfIsTrue) {
            addScore(tfObj.id);
            playTF();
        } else {
            alert("×˜×¢×•×ª!");
            playTF();
        }
    }

    // --- ×¡× ×™×™×§ ---
    let snake=[], dir='R', food={}, snkInt=null;
    function playSnake() {
        snake = [{x:140, y:140}];
        dir='R';
        placeFood();
        document.getElementById('snake-wrap
