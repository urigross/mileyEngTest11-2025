<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>××©×—×§×™× ×œ×™××•×“×™×™× ×‘×× ×’×œ×™×ª</title>
    <style>
        /* --- ×¢×™×¦×•×‘ ×›×œ×œ×™ --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f4f8;
            margin: 0;
            padding: 10px;
            text-align: center;
            color: #333;
            user-select: none;
        }

        /* --- ×›×•×ª×¨×ª ×•×’×¨×£ --- */
        #header-area {
            background-color: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            border-top: 5px solid #5c7cfa;
            max-width: 600px;
            margin-left: auto; margin-right: auto;
            position: relative;
        }

        h1 { margin: 0; font-size: 1.5rem; color: #444; }
        h3 { margin: 5px 0 0 0; font-size: 1rem; color: #888; font-weight: normal; }

        .score-badge {
            position: absolute; left: 15px; top: 15px;
            background-color: #f1c40f; color: white;
            padding: 5px 12px; border-radius: 20px;
            font-weight: bold; font-size: 0.9rem;
        }

        .settings-btn {
            position: absolute; right: 15px; top: 15px;
            background: none; border: none; font-size: 1.5rem;
            cursor: pointer; opacity: 0.6;
        }

        /* ×¤×¡ ×”×ª×§×“××•×ª */
        .progress-track {
            background-color: #e9ecef;
            height: 20px; border-radius: 10px;
            margin-top: 15px; overflow: hidden;
            position: relative;
        }
        .progress-fill {
            background-color: #2ecc71;
            height: 100%; width: 0%;
            transition: width 0.5s ease;
            color: white; font-size: 0.8rem;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold;
        }

        /* --- ×ª×¤×¨×™×˜ ×¨××©×™ --- */
        #main-menu {
            display: grid; /* ×ª××™×“ ××•×¦×’ */
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            max-width: 600px;
            margin: 0 auto;
            padding-bottom: 50px;
        }

        .menu-card {
            border: none; border-radius: 12px;
            padding: 15px; color: white;
            font-size: 1.1rem; font-weight: bold;
            cursor: pointer; box-shadow: 0 4px 0 rgba(0,0,0,0.15);
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            min-height: 80px; position: relative;
            transition: transform 0.1s;
        }
        .menu-card:active { transform: translateY(3px); box-shadow: none; }
        .menu-card span { font-size: 1.5rem; margin-bottom: 5px; }

        /* ×¦×‘×¢×™× */
        .bg-blue { background-color: #5d8cd6; }
        .bg-red { background-color: #c94b38; }
        .bg-green { background-color: #6ab063; }
        .bg-orange { background-color: #d38428; }
        .bg-dark { background-color: #3e4a59; }
        .bg-purple { background-color: #8e5ea2; }
        .bg-teal { background-color: #62a3b7; }
        .bg-gold { background-color: #dcb028; }
        .wide { grid-column: 1 / -1; }

        /* --- ××¡×›×™× --- */
        .screen {
            display: none; background: white; padding: 20px;
            border-radius: 15px; max-width: 600px; margin: 20px auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .back-btn {
            width: 100%; background-color: #eceff1; color: #333;
            border: none; padding: 12px; margin-top: 20px;
            border-radius: 8px; font-weight: bold; cursor: pointer;
        }

        /* --- ××©×—×§×™× --- */
        #tf-img-area img { max-width: 100%; max-height: 250px; border-radius: 10px; border: 3px solid #eee; margin: 15px 0; }
        .tf-opts { display: flex; gap: 15px; }
        .tf-opt { flex: 1; padding: 20px; border-radius: 10px; border: none; color: white; font-size: 1.2rem; cursor: pointer; }
        .yes { background-color: #2ecc71; } .no { background-color: #e74c3c; }

        #snake-board { width: 300px; height: 300px; background-color: #2d3436; margin: 10px auto; position: relative; border-radius: 8px; border: 4px solid #555; }
        .s-part { width: 20px; height: 20px; background-color: lime; position: absolute; border-radius: 3px; }
        .s-food { width: 20px; height: 20px; background-color: red; position: absolute; border-radius: 50%; }

        .mem-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 20px; }
        .mem-card { background-color: #d38428; height: 85px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .mem-card.flipped { background-color: white; border: 2px solid #d38428; }
        .mem-card img { max-width: 80%; max-height: 80%; }

        /* ×”×’×“×¨×•×ª */
        .switch { position: relative; display: inline-block; width: 50px; height: 28px; vertical-align: middle; margin-left: 10px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        input:checked + .slider { background-color: #2196F3; }
        input:checked + .slider:before { transform: translateX(22px); position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; border-radius: 50%; transition: .4s; }

    </style>
</head>
<body>

    <div id="header-area">
        <div class="score-badge">× ×™×§×•×“: <span id="score-display">0</span></div>
        <button class="settings-btn" onclick="openSettings()">âš™ï¸</button>
        <h1>×”×›× ×” ×œ××‘×—×Ÿ ×‘×× ×’×œ×™×ª</h1>
        <h3>×›×œ ×”××™×œ×™× + ××©×¤×˜×™×</h3>
        <div class="progress-track">
            <div id="progress-bar" class="progress-fill">0%</div>
        </div>
    </div>

    <div id="main-menu">
        <button class="menu-card bg-blue" onclick="alert('×‘×§×¨×•×‘...')"><span>âœï¸</span>×›×ª×™×‘×ª ××™×œ×™×</button>
        <button class="menu-card bg-blue" onclick="alert('×‘×§×¨×•×‘...')"><span>ğŸ‘‚</span>×”×‘× ×ª ×”× ×©××¢</button>
        <button class="menu-card bg-blue" onclick="alert('×‘×§×¨×•×‘...')"><span>ğŸ“–</span>×§×¨×™××”</button>
        <button class="menu-card bg-blue" onclick="alert('×‘×§×¨×•×‘...')"><span>ğŸ§©</span>×”×©×œ××ª ××©×¤×˜×™×</button>
        <button class="menu-card bg-red" onclick="alert('×‘×§×¨×•×‘...')"><span>âš¡</span>×§×œ×™×§ ××”×™×¨</button>
        <button class="menu-card bg-green" onclick="alert('×‘×§×¨×•×‘...')"><span>ğŸ—ï¸</span>××¤×¢×œ ×”××©×¤×˜×™×</button>
        <button class="menu-card bg-orange" onclick="startGame('truefalse')"><span>âœ…</span>×××ª ××• ×©×§×¨</button>
        <button class="menu-card bg-dark" onclick="alert('×‘×§×¨×•×‘...')"><span>ğŸ«§</span>×¤×™×¦×•×¥ ×‘×•×¢×•×ª</button>
        <button class="menu-card bg-purple wide" onclick="startGame('snake')"><span>ğŸ</span>×¡× ×™×™×§ ××™×œ×™×</button>
        <button class="menu-card bg-orange wide" onclick="startGame('memory')"><span>ğŸƒ</span>××©×—×§ ×”×–×™×›×¨×•×Ÿ</button>
        <div style="grid-column: 1/-1; display:flex; gap:10px;">
            <button class="menu-card bg-teal" style="flex:3" onclick="alert('××™×Ÿ ×¢×“×›×•× ×™×')"><span>ğŸ“œ</span>×¢×“×›×•× ×™×</button>
            <button class="menu-card bg-gold" style="flex:1" onclick="alert('×¨×™×§')"><span>ğŸ†</span>×©×™××™×</button>
        </div>
    </div>

    <div id="screen-settings" class="screen">
        <h2>×”×’×“×¨×•×ª</h2>
        <div style="text-align: right; border-bottom: 1px solid #eee; padding: 15px;">
            <label class="switch">
                <input type="checkbox" id="chk-prog" onchange="saveSettings()">
                <span class="slider"></span>
            </label>
            <strong>×œ××™×“×” ×¤×¨×•×’×¨×¡×™×‘×™×ª</strong>
            <p style="font-size:0.9rem; color:#666; margin:5px 0;">×”×¡×ª×¨×ª ××™×œ×™× ×©×›×‘×¨ ×™×“×¢×ª</p>
        </div>
        <button id="btn-reset" class="back-btn" style="color:red; opacity:0.5;" onclick="resetProgress()" disabled>××™×¤×•×¡ ×”×ª×§×“××•×ª</button>
        <button class="back-btn" onclick="goHome()">×—×–×•×¨ ×œ×ª×¤×¨×™×˜</button>
    </div>

    <div id="screen-tf" class="screen">
        <h2>×××ª ××• ×©×§×¨?</h2>
        <h1 id="tf-word" style="font-size:2.5rem; color:#d38428; margin:10px;">Word</h1>
        <div id="tf-img-area"></div>
        <div class="tf-opts">
            <button class="tf-opt yes" onclick="checkTF(true)">×××ª</button>
            <button class="tf-opt no" onclick="checkTF(false)">×©×§×¨</button>
        </div>
        <button class="back-btn" onclick="goHome()">×™×¦×™××”</button>
    </div>

    <div id="screen-snake" class="screen">
        <h2>×¡× ×™×™×§ ××™×œ×™×</h2>
        <p>××›×•×œ ××ª: <span id="snake-target" style="font-weight:bold; color:#8e5ea2; font-size:1.3rem;"></span></p>
        <div id="snake-board"></div>
        <button class="back-btn" onclick="goHome()">×™×¦×™××”</button>
    </div>

    <div id="screen-mem" class="screen">
        <h2>××©×—×§ ×”×–×™×›×¨×•×Ÿ</h2>
        <div id="mem-board" class="mem-grid"></div>
        <button class="back-btn" onclick="goHome()">×™×¦×™××”</button>
    </div>

    <audio id="snd-eat" src="https://www.soundjay.com/human/sounds/eating-chip-1.mp3"></audio>

<script>
    // --- 1. ×”×’×“×¨×ª ×”××™×œ×™× (×‘×”×ª×—×œ×” ×›×“×™ ×œ×× ×•×¢ ×§×¨×™×¡×”) ---
    const wordsDB = [
        { id: 1, w: "House", img: "https://cdn-icons-png.flaticon.com/512/619/619032.png" },
        { id: 2, w: "Dog", img: "https://cdn-icons-png.flaticon.com/512/616/616408.png" },
        { id: 3, w: "Cat", img: "https://cdn-icons-png.flaticon.com/512/616/616430.png" },
        { id: 4, w: "Sun", img: "https://cdn-icons-png.flaticon.com/512/869/869869.png" },
        { id: 5, w: "Tree", img: "https://cdn-icons-png.flaticon.com/512/490/490091.png" },
        { id: 6, w: "Car", img: "https://cdn-icons-png.flaticon.com/512/741/741407.png" },
        { id: 7, w: "Ball", img: "https://cdn-icons-png.flaticon.com/512/326/326031.png" },
        { id: 8, w: "Book", img: "https://cdn-icons-png.flaticon.com/512/3330/3330314.png" }
    ];

    // --- 2. ××©×ª× ×™× ---
    let learned = [];
    let isProg = false;
    let score = 0;

    // --- 3. ×˜×¢×™× ×” ×¨××©×•× ×™×ª ---
    window.onload = function() {
        try {
            learned = JSON.parse(localStorage.getItem('learned') || "[]");
            isProg = localStorage.getItem('isProg') === 'true';
            document.getElementById('chk-prog').checked = isProg;
            updateUI();
        } catch(e) { console.log('Resetting storage'); localStorage.clear(); }
    };

    // --- 4. ×¤×•× ×§×¦×™×•×ª ×œ×™×‘×” ---
    function updateUI() {
        // ×¢×“×›×•×Ÿ ×’×¨×£
        let pct = Math.round((learned.length / wordsDB.length) * 100);
        let bar = document.getElementById('progress-bar');
        bar.style.width = pct + '%';
        bar.innerText = pct > 5 ? pct + '%' : '';
        if(pct === 100) { bar.style.backgroundColor = '#f1c40f'; bar.innerText = 'ğŸ†'; }
        
        // ×¢×“×›×•×Ÿ ×›×¤×ª×•×¨ ××™×¤×•×¡
        let btn = document.getElementById('btn-reset');
        if(isProg) { btn.disabled = false; btn.style.opacity = 1; }
        else { btn.disabled = true; btn.style.opacity = 0.5; }
    }

    function addScore(id) {
        score += 10;
        document.getElementById('score-display').innerText = score;
        if (!learned.includes(id)) {
            learned.push(id);
            localStorage.setItem('learned', JSON.stringify(learned));
            updateUI();
        }
    }

    function getGameWords(count) {
        let pool = wordsDB;
        if (isProg) pool = wordsDB.filter(x => !learned.includes(x.id));
        
        if (pool.length < count) {
            let needed = count - pool.length;
            let extras = wordsDB.filter(x => !pool.includes(x)).sort(()=>0.5-Math.random()).slice(0, needed);
            pool = pool.concat(extras);
        }
        return pool.sort(() => 0.5 - Math.random());
    }

    // --- 5. × ×™×•×•×˜ ---
    function goHome() {
        document.querySelectorAll('.screen').forEach(el => el.style.display = 'none');
        document.getElementById('main-menu').style.display = 'grid';
        document.getElementById('header-area').style.display = 'block';
        stopSnake();
    }

    function openSettings() {
        document.getElementById('main-menu').style.display = 'none';
        document.getElementById('header-area').style.display = 'none';
        document.getElementById('screen-settings').style.display = 'block';
    }

    function startGame(type) {
        document.getElementById('main-menu').style.display = 'none';
        document.getElementById('header-area').style.display = 'none';
        
        if (type === 'truefalse') {
            document.getElementById('screen-tf').style.display = 'block';
            initTF();
        } else if (type === 'snake') {
            document.getElementById('screen-snake').style.display = 'block';
            initSnake();
        } else if (type === 'memory') {
            document.getElementById('screen-mem').style.display = 'block';
            initMem();
        }
    }

    // --- 6. ×”×’×“×¨×•×ª ---
    function saveSettings() {
        isProg = document.getElementById('chk-prog').checked;
        localStorage.setItem('isProg', isProg);
        updateUI();
    }
    function resetProgress() {
        if(confirm("×œ××¤×¡ ××ª ×”×”×ª×§×“××•×ª?")) {
            learned = [];
            localStorage.setItem('learned', "[]");
            updateUI();
            alert("××•×¤×¡!");
        }
    }

    // --- 7. ×××ª ××• ×©×§×¨ ---
    let tfItem, tfAns;
    function initTF() {
        let arr = getGameWords(2);
        tfItem = arr[0];
        tfAns = Math.random() > 0.5;
        let img = tfAns ? tfItem.img : arr[1].img;
        document.getElementById('tf-word').innerText = tfItem.w;
        document.getElementById('tf-img-area').innerHTML = `<img src="${img}">`;
    }
    function checkTF(ans) {
        if(ans === tfAns) { addScore(tfItem.id); initTF(); }
        else { alert("×˜×¢×•×ª!"); initTF(); }
    }

    // --- 8. ×¡× ×™×™×§ ---
    let snake=[], dir='r', food={}, loop;
    function initSnake() {
        snake=[{x:140, y:140}]; dir='r'; placeFood();
        document.getElementById('snake-board').innerHTML = '';
        
        // ×©×œ×™×˜×” ×‘××§×œ×“×ª
        document.onkeydown = e => {
            if(e.key=='ArrowLeft' && dir!='r') dir='l';
            if(e.key=='ArrowUp' && dir!='d') dir='u';
            if(e.key=='ArrowRight' && dir!='l') dir='r';
            if(e.key=='ArrowDown' && dir!='u') dir='d';
        };
        // ×©×œ×™×˜×” ×‘××’×¢
        document.getElementById('snake-board').onclick = e => {
            let r = e.target.getBoundingClientRect();
            let x = e.clientX - r.left;
            if(x > snake[0].x) dir='r'; else dir='l';
        };

        if(loop) clearInterval(loop);
        loop = setInterval(moveSnake, 200);
    }
    function stopSnake() { if(loop) clearInterval(loop); }
    
    function placeFood() {
        let w = getGameWords(1)[0];
        food = {x:Math.floor(Math.random()*15)*20, y:Math.floor(Math.random()*15)*20, obj:w};
        document.getElementById('snake-target').innerText = w.w;
    }
    
    function moveSnake() {
        let h = {...snake[0]};
        if(dir=='l') h.x-=20; if(dir=='u') h.y-=20; if(dir=='r') h.x+=20; if(dir=='d') h.y+=20;
        
        if(h.x==food.x && h.y==food.y) {
            addScore(food.obj.id); 
            document.getElementById('snd-eat').play().catch(e=>{}); 
            placeFood();
        } else { snake.pop(); }
        
        if(h.x<0||h.x>=300||h.y<0||h.y>=300) snake=[{x:140,y:140}]; else snake.unshift(h);
        
        let html = `<div class="s-food" style="left:${food.x}px; top:${food.y}px"></div>`;
        snake.forEach(p => html+=`<div class="s-part" style="left:${p.x}px; top:${p.y}px"></div>`);
        document.getElementById('snake-board').innerHTML = html;
    }

    // --- 9. ×–×™×›×¨×•×Ÿ ---
    let m1, m2, mLock=false;
    function initMem() {
        let board = document.getElementById('mem-board'); board.innerHTML='';
        let arr = getGameWords(6);
        let cards = [];
        arr.forEach(w => { cards.push({id:w.id, c:w.w}); cards.push({id:w.id, c:`<img src="${w.img}">`}); });
        cards.sort(()=>0.5-Math.random());
        
        cards.forEach(c => {
            let d = document.createElement('div'); d.className='mem-card';
            d.innerHTML = `<div style="display:none">${c.c}</div>`;
            d.onclick = () => {
                if(mLock || d.classList.contains('flipped')) return;
                d.classList.add('flipped'); d.firstChild.style.display='block';
                
                if(!m1) { m1={el:d, id:c.id}; return; }
                m2={el:d, id:c.id}; mLock=true;
                
                if(m1.id === m2.id) {
                    addScore(m1.id); m1=null; m2=null; mLock=false;
                } else {
                    setTimeout(() => {
                        m1.el.classList.remove('flipped'); m1.el.firstChild.style.display='none';
                        m2.el.classList.remove('flipped'); m2.el.firstChild.style.display='none';
                        m1=null; m2=null; mLock=false;
                    }, 1000);
                }
            };
            board.appendChild(d);
        });
    }
</script>
</body>
</html>
